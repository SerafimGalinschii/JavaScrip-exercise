<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <body>
    <h2>Rock Paper Scissors Game</h2>
    <div class="container">
      <button
        class="buttons"
        onclick="playGame('rock');">
        <img src="Images/rock-emoji.png" alt="" />
      </button>
      <button
        class="buttons"
        onclick="
    
     playGame('paper');

   ">
        <img src="Images/paper-emoji.png" alt="" />
      </button>
      <button
        class="buttons"
        onclick="
      
     playGame('scissors');

   ">
        <img src="Images/scissors-emoji.png" alt="" />
      </button>
    </div>

    <div class="container2">
      <p class="show_result"></p>
      <p class="eachPlayerMove"></p>

      <p class="score-info"></p>
    </div>

    <div class="div-button-reset">
      <button
        class="resetButton"
        onclick="resetScore()">
        Reset score
      </button>
    </div>

    <script>
      function resetScore() {
        score.Losses = 0;
        score.Ties = 0;
        score.Wins = 0;
        upDateTheScore();
        localStorage.removeItem('score');
      }

      let score = JSON.parse(localStorage.getItem("score")) || {
        Wins: 0,
        Losses: 0,
        Ties: 0,
      };

      upDateTheScore();

      /*if (!score){
        score = {
        Wins: 0,
        Losses: 0,
        Ties: 0
        }
      }
      */

      function playGame(playerMove) {
        const computerMove = pickMove();
        const result = playNextMove(playerMove, computerMove);

        calculateScore(result, score);
        upDateTheScore(result, playerMove, computerMove, score);

        //alert(
        //           `You choosed ${playerMove}. Computer choosed ${computerMove}. ${result}
        // Wins: ${score.Wins}, Losses: ${score.Losses}, Ties: ${score.Ties}.`
        //         );
      }


      function playNextMove(playerMove, computerMove) {
        let result = "";
        
        result = playAsScissors(playerMove, computerMove);
        if (result) {
          return result
        }

        result = playAsPaper(playerMove, computerMove);
        if (result) {
          return result
        }

        result = playAsRock(playerMove, computerMove);
        if (result) {
          return result
        }

        return result;
      }

      function playAsScissors(playerMove, computerMove) {
        let result = "";
        if (playerMove === "scissors") {
          if (computerMove === "rock") {
            result = "You lose.";
          } else if (computerMove === "paper") {
            result = "You win.";
          } else if (computerMove === "scissors") {
            result = "Tie.";
          }
        }

        return result;
      }

      function playAsPaper(playerMove, computerMove) {
        let result = "";

        if (playerMove === "paper") {
          if (computerMove === "rock") {
            result = "You win.";
          } else if (computerMove === "paper") {
            result = "Tie.";
          } else if (computerMove === "scissors") {
            result = "You lose.";
          }
        }

        return result;
      }

      function playAsRock(playerMove, computerMove) {
        let result = "";

        if (playerMove === "rock") {
          if (computerMove === "rock") {
            result = "Tie.";
          } else if (computerMove === "paper") {
            result = "You lose.";
          } else if (computerMove === "scissors") {
            result = "You win.";
          }
        }

        return result;
      }

      function calculateScore(result, score) {
        if (result === "You win.") {
          score.Wins += 1;
        } else if (result === "You lose.") {
          score.Losses += 1;
        } else if (result === "Tie.") {
          score.Ties += 1;
        }
      }

      function upDateTheScore(result, playerMove, computerMove, score) {
        document.querySelector(
          ".score-info"
        ).innerHTML = `Wins: ${score.Wins}    Losses: ${score.Losses}    Ties: ${score.Ties}.`;
        document.querySelector(".show_result").innerHTML = result;
        document.querySelector(
          ".eachPlayerMove"
        ).innerHTML = `You choosed ${getMoveIcon(playerMove)} Computer choosed ${getMoveIcon(computerMove)}`;

        localStorage.setItem("score", JSON.stringify(score));
      }

      function getMoveIcon(move){
        if (move === 'rock'){
          return `<img class="result-icon" src="Images/rock-emoji.png" alt="" />`
        }
        if (move === 'scissors'){
          return `<img class="result-icon" src="Images/scissors-emoji.png" alt="" />`
        }
        if (move === 'paper'){
          return `<img class="result-icon" src="Images/paper-emoji.png" alt="" />`
        }
      }
      

      function pickMove() {
        let computerMove = "";

        const number = Math.random();

        if (number > 0 && number <= 1 / 3) {
          computerMove = "rock";
        } else if (number > 1 / 3 && number < 2 / 3) {
          computerMove = "paper";
        } else if (number > 2 / 3 && number < 1) {
          computerMove = "scissors";
        }
        return computerMove;
      }
    </script>
  </body>
</html>
